{% import 'utils.j2' as utils %}
import uuid
import datetime
from typing import List, Optional

from fastapi_toolkit.define import BaseModel
from pydantic import Field, UUID4


{% for model in models %}
class SchemaBase{{ model.name.camel }}(BaseModel):
    """pk"""
    id: UUID4 = Field(default_factory=uuid.uuid4)

    """fields"""
    {% for field in model.fields %}
    {{ utils.render_schema_field(field) }}
    {% endfor %}

class Schema{{ model.name.camel }}(SchemaBase{{ model.name.camel }}):
    """relationships"""
    {% for link in model.links %}
    {% set t = link.t1 %}
    {% set r = link.m2 %}
    {% if t == 'many' %}
    {{ r.name.snake_plural  }}: List["SchemaBase{{ r.name.camel }}"]
    {% else %}
    {{ r.name.snake  }}: "SchemaBase{{ r.name.camel }}"
    {% endif %}
    {% endfor %}


{% endfor %}

